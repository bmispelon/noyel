{% extends 'base.html' %}

{% load i18n %}

{% block content %}
<h1>{% trans 'List of invitations' %}</h1>
<table class="table table-striped table-hover">
    <thead><tr>
        <th>{% filter capfirst %}{% trans 'sent by' context 'invitation' %}{% endfilter %}</th>
        <th>{% filter capfirst %}{% trans 'sent on' context 'invitation' %}{% endfilter %}</th>
        <th>{% filter capfirst %}{% trans 'present' %}{% endfilter %}</th>
        <th>{% filter capfirst %}{% trans 'giftee' %}{% endfilter %}</th>
        <th>{% filter capfirst %}{% trans 'actions' %}{% endfilter %}</th>
    </tr></thead>
    <tbody>
    {% for invitation in object_list %}
        <tr>
            <td>{{ invitation.sent_by.first_name|default:invitation.sent_by.username }}</td>
            <td>{{ invitation.sent_on|date }}</td>
            <td>{{ invitation.present.title }}</td>
            <td>{{ invitation.present.giftee }}</td>
            <td>
                <form action="{% url 'kdo-redeem-invitation' %}"
                      method="post">
                <button type="submit" class="btn">
                    <i class="icon-eye-open"></i>
                    {% trans 'redeem' %}
                </button>
                <input type="hidden" name="token" value="{{ invitation.token }}">
                <input type="hidden" name="next" value="{{ request.get_full_path }}">
                {% csrf_token %}
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
